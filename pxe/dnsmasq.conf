# Listen only on the Docker bridge interface
interface=eth0
bind-interfaces
except-interface=lo

# Disable DNS â€” only act as DHCP and TFTP server
port=0

# DHCP range and lease time
dhcp-range=192.168.200.100,192.168.200.200,12h

# Default gateway
dhcp-option=option:router,192.168.200.1

# Enable TFTP server
enable-tftp
tftp-root=/tftpboot

# Phase 1: serve iPXE bootloader to plain PXE clients
dhcp-boot=undionly.kpxe

# Phase 2: chainload to HTTP iPXE script once iPXE is already running
dhcp-match=set:ipxe,175
dhcp-boot=tag:ipxe,http://192.168.200.2/boot.ipxe

# Log DHCP transactions for debugging
log-dhcp
log-facility=/var/log/dnsmasq.log
